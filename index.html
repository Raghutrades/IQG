<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intraday Quick Grabber</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <style>
        @font-face {
            font-family: 'Quenton';
            src: url('quenton.otf') format('opentype');
        }

        :root {
            --dark-bg: #121420;
            --dark-card: #1a1d2e;
            --dark-text: #e0e3ff;
            --dark-border: #2a3042;
            --dark-accent: #4361ee;
            --dark-glow: rgba(67, 97, 238, 0.3);
            
            --light-bg: #f8fafc;
            --light-card: #ffffff;
            --light-text: #1e293b;
            --light-border: #e2e8f0;
            --light-accent: #3b82f6;
            --light-glow: rgba(59, 130, 246, 0.2);
            
            --gold-primary: #FFD700;
            --gold-secondary: #FFC300;
            --profit-green: #10B981;
            --loss-red: #EF4444;
            
            --bg: var(--dark-bg);
            --card: var(--dark-card);
            --text: var(--dark-text);
            --border: var(--dark-border);
            --accent: var(--dark-accent);
            --glow: var(--dark-glow);
        }
        
        .light-mode {
            --bg: var(--light-bg);
            --card: var(--light-card);
            --text: var(--light-text);
            --border: var(--light-border);
            --accent: var(--light-accent);
            --glow: var(--light-glow);
            --gold-primary: #d4af37;
            --profit-green: #059669;
            --loss-red: #DC2626;
        }
        
        .light-mode .main-title {
            color: #3b82f6 !important;
        }
        
        .light-mode .tagline {
            color: #000 !important;
        }
        
        .light-mode .datetime-label {
            color: #3b82f6 !important;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 0;
            transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1);
        }
        
        /* Header Styles */
        .header {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            padding: 1rem 2rem;
            background: var(--card);
            border-bottom: 1px solid var(--border);
            position: relative;
        }
        
        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #4361ee, #3a0ca3, #7209b7);
            filter: blur(4px);
        }
        
        .datetime-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .datetime-item {
            display: flex;
            gap: 0.5rem;
            font-size: 0.9rem;
        }
        
        .datetime-label {
            font-weight: 600;
            color: var(--gold-secondary);
        }
        
        .title-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo {
            width: 100px;
            height: 100px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.6);
            object-fit: contain;
            background: rgba(255,255,255,0.05);
            z-index: 2;
            animation: 
                logo-pulse-green 2s infinite alternate,
                logo-bounce 0.8s ease-in-out;
            transform-origin: center;
        }

        @keyframes logo-bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(0.9); }
        }

        @keyframes logo-pulse-green {
            0% { box-shadow: 0 0 20px rgba(76, 175, 80, 0.6); }
            100% { box-shadow: 0 0 30px rgba(76, 175, 80, 0.8); }
        }
        
        .main-title {
            font-family: 'Quenton', sans-serif;
            font-size: 2.5rem;
            color: white;
            margin: 0;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
            letter-spacing: 1px;
            animation: title-glow 2s infinite alternate;
        }
        
        @keyframes title-glow {
            0% { text-shadow: 0 0 10px rgba(255, 255, 255, 0.3); }
            100% { text-shadow: 0 0 20px rgba(255, 255, 255, 0.6); }
        }
        
        .tagline {
            font-family: system-ui, sans-serif;
            font-size: 1.1rem;
            color: var(--gold-primary);
            margin-top: 0.5rem;
            text-align: center;
            font-weight: 500;
        }
        
        /* Sector Grid */
        .sector-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1.5rem;
            padding: 2rem;
        }
        
        .sector-table {
            background: var(--card);
            border-radius: 12px;
            border: 1px solid var(--border);
            overflow: hidden;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            height: 420px;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .sector-table:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 40px var(--glow);
        }
        
        .sector-header {
            background: linear-gradient(135deg, var(--accent), #3a0ca3);
            color: white;
            padding: 1rem;
            font-weight: 600;
            text-align: center;
            font-size: 1.1rem;
            position: sticky;
            top: 0;
            z-index: 1;
        }
        
        .stock-list {
            flex: 1;
            overflow-y: auto;
            padding: 0.5rem;
            position: relative;
            scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
            touch-action: pan-y;
        }
        
        .stock-list::-webkit-scrollbar {
            display: none;
        }
        
        .stock-page {
            display: none;
            height: 100%;
        }
        
        .stock-page.active {
            display: flex;
            flex-direction: column;
        }
        
        .stock-item {
            padding: 0.75rem 1rem;
            margin: 0.25rem 0;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }
        
        .stock-item:hover {
            background: rgba(67, 97, 238, 0.1);
            cursor: pointer;
            transform: translateX(5px);
        }
        
        .stock-item::after {
            content: '‚Üí';
            color: var(--gold-primary);
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .stock-item:hover::after {
            opacity: 1;
        }
        
        /* Mini Pagination */
        .mini-pagination {
            position: absolute;
            bottom: 10px;
            right: 10px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px;
            z-index: 2;
            transition: all 0.3s ease;
            max-height: 24px;
            overflow: hidden;
        }
        
        .mini-pagination:hover {
            max-height: 200px;
        }
        
        .mini-pagination-container {
            background: rgba(0,0,0,0.3);
            padding: 5px;
            border-radius: 20px;
            backdrop-filter: blur(5px);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .mini-page-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: none;
            background: rgba(255,255,255,0.1);
            color: var(--text);
            cursor: pointer;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            margin: 2px 0;
        }
        
        .mini-page-btn:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .mini-page-btn.active {
            background: var(--accent);
            color: white;
        }
        
        .current-page-indicator {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(5px);
            color: white;
            font-size: 0.8rem;
            font-weight: bold;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .mini-pagination:hover .current-page-indicator {
            opacity: 1;
        }
        
        /* Quote Container */
        .quote-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: linear-gradient(145deg, var(--card), #232a3a);
            border-radius: 12px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.2),
                inset 0 0 20px rgba(0, 0, 0, 0.3);
            transform: perspective(500px) rotateX(10deg);
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { 
                transform: perspective(500px) rotateX(10deg) translateY(0);
            }
            50% { 
                transform: perspective(500px) rotateX(12deg) translateY(-10px);
            }
        }
        
        .quote-container:hover {
            animation: none;
            transform: perspective(500px) rotateX(12deg) translateY(-5px);
        }
        
        .quote-text {
            font-size: 1.25rem;
            line-height: 1.6;
            font-style: italic;
            position: relative;
            z-index: 2;
            margin: 0;
            text-align: center;
        }
        
        .quote-author {
            display: block;
            margin-top: 1rem;
            text-align: right;
            font-weight: 600;
            color: var(--gold-primary);
        }
        
        /* Calculator */
        .calculator-container {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 2rem;
            background: var(--card);
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }
        
        .calculator-title {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--gold-primary);
            font-size: 1.5rem;
        }
        
        .calculator-mode-selector {
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(67, 97, 238, 0.1);
            border-radius: 8px;
            border-left: 3px solid var(--accent);
        }
        
        .calculator-mode-selector label {
            font-weight: 600;
            margin-right: 10px;
            color: var(--accent);
        }
        
        .calculator-mode-selector select {
            padding: 0.5rem;
            border-radius: 6px;
            background: var(--bg);
            color: var(--text);
            border: 1px solid var(--border);
        }
        
        .trades-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
            background: var(--card);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 0 20px var(--glow);
        }
        
        .trades-table th {
            background: linear-gradient(135deg, var(--accent), #3a0ca3);
            color: white;
            padding: 0.75rem;
            text-align: left;
            font-weight: 600;
        }
        
        .trades-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border);
        }
        
        .trades-table tr:last-child td {
            border-bottom: none;
        }
        
        .trades-table tr:hover {
            background: rgba(67, 97, 238, 0.05);
        }
        
        .trade-input {
            width: 100%;
            padding: 0.5rem;
            border-radius: 4px;
            border: 1px solid var(--border);
            background: var(--bg);
            color: var(--text);
        }
        
        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }
        
        .calculator-section {
            margin-bottom: 1.5rem;
        }
        
        .calculator-section-title {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--accent);
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .calculator-section-title::after {
            content: '‚ñº';
            font-size: 0.8rem;
            transition: transform 0.3s;
        }
        
        .calculator-section-title.collapsed::after {
            transform: rotate(-90deg);
        }
        
        .calculator-section-content {
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        .calculator-section-content.collapsed {
            max-height: 0 !important;
            opacity: 0;
        }
        
        .calculator-input-group {
            margin-bottom: 1rem;
        }
        
        .calculator-label {
            display: block;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .calculator-input {
            width: 100%;
            padding: 0.75rem;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: var(--bg);
            color: var(--text);
            font-size: 1rem;
        }
        
        .calculator-select {
            width: 100%;
            padding: 0.75rem;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: var(--bg);
            color: var(--text);
            font-size: 1rem;
        }
        
        .calculator-button {
            background: var(--accent);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
            width: 100%;
            margin-top: 1rem;
        }
        
        .calculator-button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .calculator-button.secondary {
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
            margin-top: 0.5rem;
        }
        
        .calculator-results {
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(67, 97, 238, 0.1);
            border-radius: 6px;
            border-left: 4px solid var(--accent);
        }
        
        .calculator-result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        
        .calculator-result-label {
            font-weight: 600;
        }
        
        .summary-card {
            background: var(--card);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px solid var(--border);
            box-shadow: 0 0 20px var(--glow);
        }
        
        .summary-card h3 {
            margin-top: 0;
            color: var(--gold-primary);
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
        }
        
        .profit {
            color: var(--profit-green);
            font-weight: bold;
        }
        
        .loss {
            color: var(--loss-red);
            font-weight: bold;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 1rem;
            font-size: 0.9rem;
            color: var(--text);
        }
        
        .footer a {
            color: var(--accent);
            text-decoration: none;
        }
        
        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 50px;
            padding: 0.75rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .theme-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 25px var(--glow);
        }
        
        .theme-icon {
            font-size: 1.25rem;
        }
        
        /* Scan Mode Toggle */
        #ragsym-scan-toggle {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: linear-gradient(135deg, #4361ee, #3a0ca3);
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 30px rgba(67, 97, 238, 0.4);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        #ragsym-scan-toggle:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 40px rgba(67, 97, 238, 0.6);
        }
        
        #ragsym-scan-toggle.active {
            background: linear-gradient(135deg, #4cc9f0, #3a0ca3);
        }
        
        .pulse-ring {
            position: absolute;
            width: 100%;
            height: 100%;
            border: 2px solid #FFD700;
            border-radius: 50px;
            top: 0;
            left: 0;
            animation: ragsym-pulse 2s infinite;
            opacity: 0;
            z-index: -1;
        }
        
        @keyframes ragsym-pulse {
            0% { transform: scale(0.95); opacity: 0.7; }
            100% { transform: scale(1.1); opacity: 0; }
        }
        
        /* Chart Preview */
        #ragsym-chart-preview {
            position: fixed;
            width: 500px;
            height: 400px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 999;
            display: none;
            overflow: hidden;
            resize: both;
            min-width: 350px;
            min-height: 300px;
        }
        
        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: linear-gradient(135deg, var(--accent), #3a0ca3);
            color: white;
            cursor: move;
            user-select: none;
        }
        
        .full-chart-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .tradingview-widget-container {
            width: 100%;
            height: calc(100% - 40px);
            position: relative;
        }
        
        /* Resize handle */
        #ragsym-chart-preview::-webkit-resizer {
            background: var(--accent);
            border-radius: 4px;
        }
        
        /* Responsive Adjustments */
        @media (max-width: 1600px) {
            .sector-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }
        
        @media (max-width: 1200px) {
            .sector-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 900px) {
            .sector-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .header {
                grid-template-columns: 1fr;
                gap: 1rem;
                text-align: center;
            }
            
            .datetime-container {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .logo-container {
                justify-content: center;
            }
            
            #ragsym-scan-toggle {
                bottom: 80px;
                left: 20px;
            }
            
            #ragsym-chart-preview {
                width: 350px;
                height: 300px;
                left: 50% !important;
                transform: translateX(-50%);
                top: 120px !important;
            }
        }
        
        @media (max-width: 600px) {
            .sector-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }
            
            .header {
                padding: 1rem;
            }
            
            .main-title {
                font-size: 2rem;
            }
            
            .logo {
                width: 50px;
                height: 50px;
            }
            
            .trades-table {
                font-size: 0.8rem;
            }
            
            .trades-table th, 
            .trades-table td {
                padding: 0.5rem;
            }
            
            #ragsym-scan-toggle {
                padding: 10px 15px;
                font-size: 0.9rem;
                bottom: 70px;
            }
            
            #ragsym-chart-preview {
                width: 300px;
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Header with Date/Time, Title -->
    <header class="header">
        <div class="datetime-container">
            <div class="datetime-item">
                <span class="datetime-label">Date:</span>
                <span id="current-date">Loading...</span>
            </div>
            <div class="datetime-item">
                <span class="datetime-label">Time:</span>
                <span id="current-time">Loading...</span>
            </div>
            <div class="datetime-item">
                <span class="datetime-label">Remaining in Month:</span>
                <span id="days-month">Loading...</span>
            </div>
            <div class="datetime-item">
                <span class="datetime-label">Remaining in Year:</span>
                <span id="days-year">Loading...</span>
            </div>
        </div>
        
        <div class="title-container">
            <div class="logo-container">
                <img src="logo.png" class="logo" alt="Intraday Quick Grabber Logo">
                <div>
                    <h1 class="main-title">Intraday Quick Grabber</h1>
                    <div class="tagline" id="tagline">Catch the Pulse, Ride the Move.</div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Sector Grid -->
    <div class="sector-grid" id="sectorGrid">
        <!-- Sectors will be inserted here by JavaScript -->
    </div>
    
    <!-- Trading Calculator -->
    <div class="calculator-container">
        <h2 class="calculator-title">Advanced Trading Calculator</h2>
        
        <div class="calculator-mode-selector">
            <label>Calculation Mode:</label>
            <select id="tradeMultiplier">
                <option value="1">Single Trade</option>
                <option value="5">5 Trades</option>
                <option value="10">10 Trades</option>
                <option value="20">20 Trades</option>
            </select>
        </div>
        
        <table class="trades-table" id="tradesTable">
            <thead>
                <tr>
                    <th>Trade</th>
                    <th>Buy Price (‚Çπ)</th>
                    <th>Sell Price (‚Çπ)</th>
                    <th>Quantity</th>
                </tr>
            </thead>
            <tbody id="tradesTableBody">
                <!-- Rows will be inserted here by JavaScript -->
            </tbody>
        </table>
        
        <div class="calculator-grid">
            <div class="calculator-section">
                <h3 class="calculator-section-title">Trade Configuration</h3>
                <div class="calculator-section-content">
                    <div class="calculator-input-group">
                        <label class="calculator-label">Trade Type</label>
                        <select class="calculator-select" id="tradeType">
                            <option value="equity_delivery">Equity Delivery</option>
                            <option value="equity_intraday">Equity Intraday</option>
                            <option value="futures">Futures</option>
                            <option value="options">Options</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="calculator-section">
                <h3 class="calculator-section-title collapsed">Brokerage Charges</h3>
                <div class="calculator-section-content collapsed">
                    <div class="calculator-input-group">
                        <label class="calculator-label">Equity Delivery</label>
                        <input type="text" class="calculator-input" id="equityDelivery" value="‚Çπ0 (Zero Brokerage)" readonly>
                    </div>
                    <div class="calculator-input-group">
                        <label class="calculator-label">Equity Intraday</label>
                        <input type="text" class="calculator-input" id="equityIntraday" value="0.03% or ‚Çπ20 per order (lower)" readonly>
                    </div>
                    <div class="calculator-input-group">
                        <label class="calculator-label">Futures</label>
                        <input type="text" class="calculator-input" id="futures" value="0.03% or ‚Çπ20 per order (lower)" readonly>
                    </div>
                    <div class="calculator-input-group">
                        <label class="calculator-label">Options</label>
                        <input type="text" class="calculator-input" id="options" value="Flat ‚Çπ20 per order" readonly>
                    </div>
                </div>
            </div>
        </div>
        
        <button class="calculator-button" id="calculateButton">Calculate All Trades</button>
        
        <div class="calculator-results" id="calculatorResults" style="display: none;">
            <div class="summary-card">
                <h3>Summary Results</h3>
                <div class="calculator-result-item">
                    <span class="calculator-result-label">Total Gross Profit/Loss:</span>
                    <span id="grossResult">‚Çπ0.00</span>
                </div>
                <div class="calculator-result-item">
                    <span class="calculator-result-label">Total Net Profit/Loss:</span>
                    <span id="netResult" style="font-weight: bold;">‚Çπ0.00</span>
                </div>
            </div>
            
            <button class="calculator-button secondary" id="toggleDetails">Show Detailed Breakdown ‚ñº</button>
            
            <div id="detailedResults" style="display: none; margin-top: 1rem;">
                <div class="calculator-result-item">
                    <span class="calculator-result-label">Total Brokerage:</span>
                    <span id="brokerageResult">‚Çπ0.00</span>
                </div>
                <div class="calculator-result-item">
                    <span class="calculator-result-label">Total STT/CTT:</span>
                    <span id="sttResult">‚Çπ0.00</span>
                </div>
                <div class="calculator-result-item">
                    <span class="calculator-result-label">Total Transaction Charges:</span>
                    <span id="transactionResult">‚Çπ0.00</span>
                </div>
                <div class="calculator-result-item">
                    <span class="calculator-result-label">Total GST:</span>
                    <span id="gstResult">‚Çπ0.00</span>
                </div>
                <div class="calculator-result-item">
                    <span class="calculator-result-label">Total Stamp Duty:</span>
                    <span id="stampResult">‚Çπ0.00</span>
                </div>
                <div class="calculator-result-item">
                    <span class="calculator-result-label">Total SEBI Charges:</span>
                    <span id="sebiResult">‚Çπ0.00</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Quote Container -->
    <div class="quote-container">
        <p class="quote-text" id="quoteText">"The market is a device for transferring money from the impatient to the patient."</p>
        <span class="quote-author" id="quoteAuthor">- Warren Buffett</span>
    </div>
    
    <!-- Footer -->
    <div class="footer">
        Designed by <a href="https://www.instagram.com/nerdyintruder/" target="_blank">@Nerdyintruder</a>
    </div>
    
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle">
        <span class="theme-icon" id="themeIcon">üåô</span>
        <span id="themeText">Dark Mode</span>
    </button>

    <!-- Floating Ticker + Scan Mode -->
    <div class="floating-ticker-container">
        <div class="ticker-display" id="randomTicker"></div>
        <button id="ragsym-scan-toggle">
            <span>üîç Scan Mode</span>
            <div class="pulse-ring"></div>
        </button>
    </div>

    <!-- Chart Preview Popup -->
    <div id="ragsym-chart-preview">
        <div class="preview-header">
            <span class="ticker-name">RELIANCE</span>
            <button class="full-chart-btn">Full Chart ‚Üó</button>
        </div>
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <div class="tradingview-widget-copyright">
                <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
                    <span class="blue-text">Track all markets on TradingView</span>
                </a>
            </div>
        </div>
    </div>

    <script>
        // Stock data for all sectors
        const sectorData = {
            "NIFTY50": ["TRENT", "TCS", "NTPC", "BRITANNIA", "ICICIBANK", "ITC", "HINDUNILVR", "BHARTIARTL", "ADANIPORTS", "TECHM", "COALINDIA", "RELIANCE", "ONGC", "INFY", "NESTLEIND", "SBIN", "ASIANPAINT", "ADANIENT", "KOTAKBANK", "BPCL", "WIPRO", "MARUTI", "HCLTECH", "BAJFINANCE", "TATAMOTORS", "LT", "BEL", "HEROMOTOCO", "HDFCLIFE", "TITAN", "DRREDDY", "TATASTEEL", "CIPLA", "TATACONSUM", "POWERGRID", "JSWSTEEL", "BAJAJFINSV", "GRASIM", "APOLLOHOSP", "HINDALCO", "ULTRACEMCO", "BAJAJ-AUTO", "INDUSINDBK", "SBILIFE", "SHRIRANFIN", "HDFCBANK", "SUNPHARMA", "M&M", "EICHERMOT", "AXISBANK"],
            "BANKING": ["ICICIBANK", "BANKBARODA", "SBIN", "KOTAKBANK", "FEDERALBNK", "INDIANB", "BANKINDIA", "INDUSINBK", "AUBANK", "HDFCBANK", "PNB", "IDFCFIRSTB", "CANBK", "AXISBANK"],
            "AUTOMOBILE": ["EXIDEIND", "MOTHERSON", "APOLLOTYRE", "MARUTI", "TATAMOTORS", "BOSCHLTD", "HEROMOTOCO", "BALKRISIND", "TVSMOTOR", "SONACOMS", "TITAGARH", "TIINDIA", "BHARATFORG", "MRF", "BAJAJ-AUTO", "M&M", "EICHERMOT"],
            "FINANCIAL SERVICES": ["ICICIBANK", "IRFC", "ICICIGI", "PFC", "ICICIPRULI", "SBICARD", "MUTHOOTFIN", "SBIN", "LICHSGFIN", "KOTAKBANK", "BAJFINANCE", "HDFCAMC", "POONAWALLA", "LICI", "HDFCLIFE", "HUDCO", "RECLTD", "CDSL", "JIOFIN", "BAJAJFINSV", "CHOLAFIN", "IIFL", "POLICYBZR", "MAXHEALTH", "SBILIFE", "SHRIRAMFIN", "ANGELONE", "BSE", "HDFCBANK", "PAYTM", "AXISBANK"],
            "FMCG": ["BRITANNIA", "ITC", "HINDUNILVR", "DMART", "NESTLEIND", "COLPAL", "DABUR", "MARICO", "KALYANJIL", "ZOMATO", "VBL", "TATACONSUM", "PATANJALI", "UNITDSPR", "GODREJCP", "NYKAA", "SUPERMEIND"],
            "INFORMATION TECHNOLOGY": ["TCS", "TECHM", "INFY", "WIPRO", "HCLTECH", "PERSISTENT", "COFORGE", "CAMS", "LTIM", "KPITTECH", "LTTS", "MPHASIS", "CYIENT", "TATAELXSI", "HFCL"],
            "SENSEX": ["TCS", "NTPC", "ICICIBANK", "ITC", "HINDUNILVR", "BHARTIARTL", "ADANIPORTS", "TECHM", "RELIANCE", "INFY", "NESTLEIND", "SBIN", "ASIANPAINT", "KOTAKBANK", "MARUTI", "HCLTECH", "BAJFINANCE", "TATAMOTORS", "LT", "TITAN", "TATASTEEL", "POWERGRID", "JSWSTEEL", "BAJAJFINSV", "ULTRACEMCO", "INDUSINDBK", "HDFCBANK", "SUNPHARMA", "M&M", "AXISBANK"],
            "METALS": ["ADANIENT", "JINDALSTEL", "SAIL", "TATASTEEL", "JSWSTEEL", "HINDALCO", "HINDCOPPER", "VEDL", "NATIONALUM", "NMDC", "JSL", "APLAPOLLO"],
            "PHARMACEUTICALS": ["AUROPHARMA", "ZYDUSLIFE", "GLENMARK", "DRREDDY", "LAURUSLABS", "CIPLA", "LUPIN", "DIVISLAB", "TORNTPHARM", "GRANULES", "ALKEM", "SUNPHARMA", "BIOCON"],
            "PSU BANKS": ["BANKBARODA", "SBIN", "INDIANB", "BANKINDIA", "UNIONBANK", "PNB", "CANBK"],
            "PRIVATE BANKS": ["ICICIBANK", "KOTAKBANK", "FEDERALBNK", "RBLBANK", "BANDHANBNK", "INDUSINDBK", "HDFCBANK", "IDFCFIRSTB", "AXISBANK"],
            "REALTY": ["NCC", "PHOENIXLTD", "PRESTIGE", "OBEROIRLTY", "GODREJPROP", "DLF", "LODHA", "NBCC", "IRB"],
            "ENERGY": ["NTPC", "COALINDIA", "RELIANCE", "ONGC", "CESE", "SOLARINDS", "TATAPOWER", "TORNTPOWER", "BPCL", "IOC", "ADANIENSOL", "IREDA", "OIL", "POWERGRID", "ATGL", "CGPOWER", "PETRONET", "JSWENERGY", "SJVN", "NHPC", "IGL", "GMRAIRPORT", "ADANIGREEN"],
            "CEMENT": ["AMBUJACEM", "ACC", "JKCEMENT", "ULTRACEMCO", "DALBHARAT", "SHREECEM", "RAMCOCEM"],
            "MIDCAP SELECT": ["AUROPHARMA", "HINDUPETRO", "VOLTAS", "UPL", "HDFCAMC", "PERSISTENT", "FEDERALBNK", "POLYCAB", "COFORGE", "LUPIN", "ASTRAL", "PAGEIND", "PIIND", "BHARATFORG", "MRF", "JUBLFOOD", "CONCOR", "INDHOTEL", "GODREJPROP", "AUBANK", "ASHOKLEY", "MPHASIS", "IDFCFIRSTB", "IDEA", "CUMMINSIND"]
        };

        const punchlines = [
            "Catch the Pulse, Ride the Move.",
            "No Noise. Just Precision.",
            "Built for Speed. Designed to Grab Gains.",
            "Strike Fast, Exit Smarter.",
            "From Sector Surge to Pocket Profit ‚Äì Instantly.",
            "Decode Momentum. Dominate the Move.",
            "Fast Picks. Clean Breaks. Real Edge.",
            "Find the Spark Before the Flame.",
            "Scans That Speak the Market's Language.",
            "One Click Ahead of the Herd."
        ];

        const quotes = [
            { text: "Opportunities don't happen, you create them.", author: "" },
            { text: "The market is always right. Never argue with it.", author: "" },
            { text: "Price is what you pay. Value is what you get.", author: "Benjamin Graham" },
            { text: "Risk comes from not knowing what you're doing.", author: "Warren Buffett" },
            { text: "Time is your friend; impulse is your enemy.", author: "" },
            { text: "Buy when everyone else is selling and hold until everyone else is buying.", author: "Warren Buffett" },
            { text: "The stock market is filled with individuals who know the price of everything, but the value of nothing.", author: "" },
            { text: "In investing, what is comfortable is rarely profitable.", author: "" },
            { text: "The four most dangerous words in investing are: 'This time it's different.'", author: "Sir John Templeton" },
            { text: "Wide diversification is only required when investors do not understand what they are doing.", author: "Warren Buffett" },
            { text: "The individual investor should act consistently as an investor and not as a speculator.", author: "Ben Graham" },
            { text: "It's not whether you're right or wrong that's important, but how much money you make when you're right and how much you lose when you're wrong.", author: "George Soros" },
            { text: "The goal of a successful trader is to make the best trades. Money is secondary.", author: "Alexander Elder" },
            { text: "If you can't control your emotions, you can't control your money.", author: "Warren Buffett" },
            { text: "The most important quality for an investor is temperament, not intellect.", author: "Warren Buffett" },
            { text: "Know what you own, and know why you own it.", author: "Peter Lynch" },
            { text: "The stock market is a device for transferring money from the impatient to the patient.", author: "Warren Buffett" },
            { text: "The best time to plant a tree was 20 years ago. The second best time is now.", author: "Chinese Proverb" },
            { text: "Don't look for the needle in the haystack. Just buy the haystack!", author: "John Bogle" },
            { text: "Someone's sitting in the shade today because someone planted a tree a long time ago.", author: "Warren Buffett" },
            { text: "It's far better to buy a wonderful company at a fair price than a fair company at a wonderful price.", author: "Warren Buffett" },
            { text: "Our favorite holding period is forever.", author: "Warren Buffett" },
            { text: "You get recessions, you have stock market declines. If you don't understand that's going to happen, then you're not ready, you won't do well in the markets.", author: "Peter Lynch" },
            { text: "The stock market is a no-called-strike game. You don't have to swing at everything‚Äîyou can wait for your pitch.", author: "Warren Buffett" },
            { text: "The key to making money in stocks is not to get scared out of them.", author: "Peter Lynch" },
            { text: "The biggest risk of all is not taking one.", author: "" },
            { text: "Compound interest is the eighth wonder of the world. He who understands it, earns it; he who doesn't, pays it.", author: "Albert Einstein" },
            { text: "Do not save what is left after spending, but spend what is left after saving.", author: "Warren Buffett" },
            { text: "Never depend on a single income. Make investment to create a second source.", author: "Warren Buffett" },
            { text: "The best investment you can make is in yourself.", author: "Warren Buffett" }
        ];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initThemeToggle();
            initDateTime();
            initTagline();
            initRandomTicker();
            initSectorGrid();
            initQuotes();
            initCalculator();
            initTradeMultiplier();
            initCollapsibleSections();
            initScanMode();
        });

        // Theme toggle
        function initThemeToggle() {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            
            function setTheme(isDark) {
                if (isDark) {
                    document.body.classList.remove('light-mode');
                    themeIcon.textContent = 'üåô';
                    themeText.textContent = 'Dark Mode';
                    localStorage.setItem('theme', 'dark');
                } else {
                    document.body.classList.add('light-mode');
                    themeIcon.textContent = '‚òÄÔ∏è';
                    themeText.textContent = 'Light Mode';
                    localStorage.setItem('theme', 'light');
                }
            }
            
            themeToggle.addEventListener('click', () => {
                setTheme(!document.body.classList.contains('light-mode'));
            });
            
            if (localStorage.getItem('theme') === 'light') {
                setTheme(false);
            }
        }

        // Date/time functions
        function initDateTime() {
            function updateDateTime() {
                const now = new Date();
                const options = { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    timeZone: 'Asia/Kolkata'
                };
                
                document.getElementById('current-date').textContent = now.toLocaleDateString('en-IN', options);
                
                const timeOptions = {
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: true,
                    timeZone: 'Asia/Kolkata'
                };
                document.getElementById('current-time').textContent = now.toLocaleTimeString('en-IN', timeOptions);
                
                const lastDayOfMonth = new Date(now.getFullYear(), now.getMonth() + 1, 0);
                const daysInMonth = lastDayOfMonth.getDate();
                const daysLeftMonth = daysInMonth - now.getDate();
                document.getElementById('days-month').textContent = `${daysLeftMonth} days`;
                
                const lastDayOfYear = new Date(now.getFullYear(), 11, 31);
                const daysLeftYear = Math.ceil((lastDayOfYear - now) / (1000 * 60 * 60 * 24));
                document.getElementById('days-year').textContent = `${daysLeftYear} days`;
            }
            
            updateDateTime();
            setInterval(updateDateTime, 1000);
        }

        // Random tagline
        function initTagline() {
            const taglineElement = document.getElementById('tagline');
            taglineElement.textContent = punchlines[Math.floor(Math.random() * punchlines.length)];
        }

        // Random ticker display
        function initRandomTicker() {
            const tickerDisplay = document.getElementById('randomTicker');
            const allStocks = Object.values(sectorData).flat();
            
            function updateTicker() {
                const randomStock = allStocks[Math.floor(Math.random() * allStocks.length)];
                tickerDisplay.textContent = randomStock;
                tickerDisplay.dataset.stock = randomStock;
            }
            
            tickerDisplay.addEventListener('click', function() {
                const currentStock = this.dataset.stock;
                if (currentStock) {
                    window.open(`https://www.tradingview.com/chart/?symbol=NSE:${currentStock}`, '_blank');
                }
            });
            
            updateTicker();
            setInterval(updateTicker, 15000);
        }

        // Sector grid
        function initSectorGrid() {
            const sectorGrid = document.getElementById('sectorGrid');
            
            Object.entries(sectorData).forEach(([sectorName, stocks]) => {
                const sectorDiv = document.createElement('div');
                sectorDiv.className = 'sector-table';
                sectorDiv.innerHTML = `
                    <div class="sector-header">${sectorName}</div>
                    <div class="stock-list" id="${sectorName}-stocks"></div>
                `;
                
                const stockList = sectorDiv.querySelector('.stock-list');
                const pageCount = Math.ceil(stocks.length / 10);
                
                for (let i = 0; i < pageCount; i++) {
                    const pageDiv = document.createElement('div');
                    pageDiv.className = `stock-page ${i === 0 ? 'active' : ''}`;
                    
                    const startIdx = i * 10;
                    const endIdx = startIdx + 10;
                    const pageStocks = stocks.slice(startIdx, endIdx);
                    
                    for (let j = 0; j < 10; j++) {
                        const stockItem = document.createElement('div');
                        stockItem.className = 'stock-item';
                        
                        if (j < pageStocks.length) {
                            stockItem.textContent = pageStocks[j];
                            stockItem.addEventListener('click', () => {
                                window.open(`https://www.tradingview.com/chart/?symbol=NSE:${pageStocks[j]}`, '_blank');
                            });
                        }
                        
                        pageDiv.appendChild(stockItem);
                    }
                    
                    stockList.appendChild(pageDiv);
                }
                
                sectorGrid.appendChild(sectorDiv);
            });
        }

        // Random quotes
        function initQuotes() {
            const quoteText = document.getElementById('quoteText');
            const quoteAuthor = document.getElementById('quoteAuthor');
            
            function showRandomQuote() {
                const quote = quotes[Math.floor(Math.random() * quotes.length)];
                quoteText.textContent = `"${quote.text}"`;
                quoteAuthor.textContent = quote.author ? `- ${quote.author}` : '';
            }
            
            showRandomQuote();
            setInterval(showRandomQuote, 10000);
        }
        
        // Trade multiplier
        function initTradeMultiplier() {
            const tradeMultiplier = document.getElementById('tradeMultiplier');
            const tradesTableBody = document.getElementById('tradesTableBody');
            
            function generateTradeRows(count) {
                tradesTableBody.innerHTML = '';
                for (let i = 0; i < count; i++) {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>Trade ${i + 1}</td>
                        <td><input type="number" class="trade-input" id="buyPrice${i}" placeholder="Buy Price"></td>
                        <td><input type="number" class="trade-input" id="sellPrice${i}" placeholder="Sell Price"></td>
                        <td><input type="number" class="trade-input" id="quantity${i}" placeholder="Quantity"></td>
                    `;
                    tradesTableBody.appendChild(row);
                }
            }
            
            generateTradeRows(1);
            tradeMultiplier.addEventListener('change', function() {
                generateTradeRows(parseInt(this.value));
            });
        }
        
        // Collapsible sections
        function initCollapsibleSections() {
            document.querySelectorAll('.calculator-section-title').forEach(title => {
                title.addEventListener('click', function() {
                    this.classList.toggle('collapsed');
                    const content = this.nextElementSibling;
                    content.classList.toggle('collapsed');
                    content.style.maxHeight = content.classList.contains('collapsed') ? '0' : content.scrollHeight + 'px';
                });
            });
        }
        
        // Trading calculator
        function initCalculator() {
            document.getElementById('calculateButton').addEventListener('click', function() {
                alert('Calculator functionality would go here');
            });
        }

        // Scan mode with TradingView popup
        function initScanMode() {
            const toggle = document.getElementById('ragsym-scan-toggle');
            const preview = document.getElementById('ragsym-chart-preview');
            const fullChartBtn = preview.querySelector('.full-chart-btn');
            const tickerName = preview.querySelector('.ticker-name');
            const header = preview.querySelector('.preview-header');
            
            let scanActive = false;
            let currentTicker = null;
            let isDragging = false;
            let offsetX, offsetY;

            // Make preview draggable
            header.addEventListener('mousedown', (e) => {
                isDragging = true;
                offsetX = e.clientX - preview.getBoundingClientRect().left;
                offsetY = e.clientY - preview.getBoundingClientRect().top;
            });

            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                preview.style.left = `${e.clientX - offsetX}px`;
                preview.style.top = `${e.clientY - offsetY}px`;
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
            });

            // Toggle scan mode
            toggle.addEventListener('click', () => {
                scanActive = !scanActive;
                toggle.classList.toggle('active');
                if (!scanActive) hidePreview();
            });

            // Ticker detection
            document.addEventListener('mouseover', (e) => {
                if (!scanActive) return;
                const text = e.target?.textContent?.trim() || '';
                const ticker = text.match(/^[A-Z]{2,10}$/)?.[0];
                if (ticker && isKnownTicker(ticker)) showPreview(ticker, e);
            });

            function isKnownTicker(ticker) {
                return Object.values(sectorData).flat().includes(ticker);
            }

            function showPreview(ticker, event) {
                if (currentTicker === ticker) return;
                currentTicker = ticker;
                tickerName.textContent = ticker;
                
                // Load TradingView widget
                const widgetContainer = preview.querySelector('.tradingview-widget-container__widget');
                widgetContainer.innerHTML = '';
                
                const script = document.createElement('script');
                script.type = 'text/javascript';
                script.src = 'https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js';
                script.async = true;
                script.innerHTML = JSON.stringify({
                    "autosize": true,
                    "symbol": `NSE:${ticker}`,
                    "interval": "15",
                    "timezone": "Asia/Kolkata",
                    "theme": document.body.classList.contains('light-mode') ? "light" : "dark",
                    "style": "1",
                    "locale": "en",
                    "allow_symbol_change": false,
                    "enable_publishing": false,
                    "withdateranges": true,
                    "range": "1D",
                    "hide_side_toolbar": false,
                    "allow_symbol_change": true,
                    "studies": [
                        "STD;EMA",
                        "STD;VWMA"
                    ],
                    "support_host": "https://www.tradingview.com"
                });
                
                widgetContainer.appendChild(script);
                preview.style.display = 'block';
                positionPreview(event);
            }

            function hidePreview() {
                preview.style.display = 'none';
                currentTicker = null;
            }

            function positionPreview(event) {
                const mouseX = event.clientX;
                const mouseY = event.clientY;
                const previewWidth = preview.offsetWidth;
                const previewHeight = preview.offsetHeight;
                
                let left = mouseX + 20;
                let top = mouseY + 20;
                
                if (left + previewWidth > window.innerWidth) {
                    left = mouseX - previewWidth - 20;
                }
                
                if (top + previewHeight > window.innerHeight) {
                    top = mouseY - previewHeight - 20;
                }
                
                preview.style.left = `${left}px`;
                preview.style.top = `${top}px`;
            }

            fullChartBtn.addEventListener('click', () => {
                if (currentTicker) {
                    window.open(`https://www.tradingview.com/chart/?symbol=NSE:${currentTicker}`, '_blank');
                }
            });
        }
    </script>
</body>
</html>
